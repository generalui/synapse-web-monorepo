import{a as m,F as g,j as t}from"./jsx-runtime-095bf462.js";import{r as y}from"./index-8db94870.js";import{u as C,S as N,a as w,aT as F,b as $}from"./SynapseClient-a4e4b778.js";import{I as H}from"./IconSvg-745db870.js";import{u as x}from"./react-intersection-observer.modern-64b519d2.js";import{P as R}from"./getEndpoint-ac94413e.js";import{u as S}from"./useInfiniteQuery-9947b096.js";import{S as v}from"./SkeletonTable-5a27bbce.js";import{T as O}from"./Typography-2ef1cd4b.js";import{S as V}from"./Skeleton-7e59f3cf.js";import"./_commonjsHelpers-042e6b4d.js";import"./SynapseConstants-b4e8f39a.js";import"./OrientationBanner-f49a763f.js";import"./FullWidthAlert-81b4d296.js";import"./AlertTitle-78f79fc0.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./extends-98964cd2.js";import"./styled-55b76ab0.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-29d231ba.js";import"./createSvgIcon-c95ac3df.js";import"./Paper-18b94b55.js";import"./IconButton-693072d1.js";import"./ButtonBase-808eaa85.js";import"./emotion-react.browser.esm-6281246a.js";import"./assertThisInitialized-081f9914.js";import"./inheritsLoose-c82a83d4.js";import"./TransitionGroupContext-f2b81dde.js";import"./useForkRef-f2aa3d66.js";import"./useIsFocusVisible-bbf13f29.js";import"./Stack-eddb74b2.js";import"./extendSxProp-a7783ced.js";import"./Box-402daddb.js";import"./useTheme-c3897ed6.js";import"./Grow-aadb01f1.js";import"./isHostComponent-fa76b8d9.js";import"./index-8ce4a492.js";import"./utils-fc362ac6.js";import"./ClickAwayListener-36b79525.js";import"./Tooltip-8e07f653.js";import"./Button-79de9a0b.js";import"./Link-f298db32.js";import"./isArray-5e3f9107.js";import"./dayjs.min-8d4ef725.js";import"./index-58d3fd43.js";import"./CheckCircleTwoTone-8c851187.js";import"./inputBaseClasses-529452bb.js";import"./Fade-fa965c6f.js";import"./ErrorOutlined-77fe1f54.js";import"./InfoOutlined-c40241a8.js";import"./times-5bba76cd.js";import"./_baseTimes-8cccc40f.js";import"./isSymbol-7c514724.js";function A(r,n){const{accessToken:c,keyFactory:a}=C();return S(a.getUserChallengesQueryKey(r),async s=>{const e=await N.getUserChallenges(c,r,s.pageParam,10);if(e.results.length>0){const i=Array.from(e.results,l=>l.projectId),f=await N.getEntityHeadersByIds(i);return{results:Array.from(e.results,(l,p)=>({challenge:l,projectHeader:f.results[p]})),totalNumberOfResults:e.totalNumberOfResults}}return{results:[],totalNumberOfResults:e.totalNumberOfResults}},{...n,getNextPageParam:(s,e)=>{if(s.results.length>0)return e.length*10}})}function G(r,n,c){const{accessToken:a,keyFactory:s}=C();return S(s.getUserProjectsQueryKey(r,n),async e=>N.getUserProjects(r,{...n,nextPageToken:e.pageParam},a),{...c,getNextPageParam:e=>e.nextPageToken})}function q(r,n){const{accessToken:c,keyFactory:a}=C();return S(a.getUserTeamsQueryKey(r),async s=>N.getUserTeamList(c,r,s.pageParam,10),{...n,getNextPageParam:(s,e)=>{if(s.results.length>0)return e.length*10}})}function E({userId:r}){const n=w(),{ref:c,inView:a}=x(),{data:s,status:e,isFetching:i,isLoading:f,hasNextPage:h,fetchNextPage:l,isError:p,error:d}=A(r);y.useEffect(()=>{p&&d&&n(d)},[p,d,n]),y.useEffect(()=>{e==="success"&&!i&&h&&l&&a&&l()},[e,i,h,l,a]);const u=(s==null?void 0:s.pages.flatMap(o=>o.results))??[];return m(g,{children:[u.length>0&&m(g,{children:[u.map(o=>o&&o.challenge&&o.projectHeader?t("p",{children:t("a",{target:"_self",rel:"noopener noreferrer",href:`${R.PORTAL}#!Synapse:${o.challenge.projectId}/challenge`,children:o.projectHeader.name})},`user-challenge-list-item-${o.challenge.projectId}`):!1),t("div",{ref:c})]}),!i&&u.length==0&&t("div",{children:"Empty"}),f&&t(v,{numRows:5,numCols:1})]})}try{E.displayName="UserChallenges",E.__docgenInfo={description:"",displayName:"UserChallenges",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function j({userId:r}){const n=w(),{ref:c,inView:a}=x(),s={},{data:e,status:i,isFetching:f,isLoading:h,hasNextPage:l,fetchNextPage:p,isError:d,error:u}=G(r,s);y.useEffect(()=>{d&&u&&n(u)},[d,u,n]),y.useEffect(()=>{i==="success"&&!f&&l&&p&&a&&p()},[i,f,l,p,a]);const o=(e==null?void 0:e.pages.flatMap(P=>P.results))??[];return m(g,{children:[o.length>0&&m(g,{children:[o.map(P=>P?t("p",{children:t("a",{target:"_self",rel:"noopener noreferrer",href:`${R.PORTAL}#!Synapse:${P.id}`,children:P.name})},`user-project-list-item-${P.id}`):!1),t("div",{ref:c})]}),!f&&o.length==0&&t("div",{children:"Empty"}),h&&t(v,{numRows:5,numCols:1})]})}try{j.displayName="UserProjects",j.__docgenInfo={description:"",displayName:"UserProjects",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}function I({userId:r}){const n=w(),{ref:c,inView:a}=x(),{data:s,status:e,isFetching:i,isLoading:f,hasNextPage:h,fetchNextPage:l,isError:p,error:d}=q(r);y.useEffect(()=>{p&&d&&n(d)},[p,d,n]),y.useEffect(()=>{e==="success"&&!i&&h&&l&&a&&l()},[e,i,h,l,a]);const u=(s==null?void 0:s.pages.flatMap(o=>o.results))??[];return m(g,{children:[u.length>0&&m(g,{children:[u.map(o=>o?t("p",{children:t("a",{target:"_self",rel:"noopener noreferrer",href:`${R.PORTAL}#!Team:${o.id}`,children:o.name})},`user-team-list-item-${o.id}`):!1),t("div",{ref:c})]}),!i&&u.length==0&&t("div",{children:"Empty"}),f&&t(v,{numRows:5,numCols:1})]})}try{I.displayName="UserTeams",I.__docgenInfo={description:"",displayName:"UserTeams",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}var _=(r=>(r.PROJECTS="Projects",r.TEAMS="Teams",r.CHALLENGES="Challenges",r))(_||{});function U({userId:r}){const[n,c]=y.useState("Projects"),{data:a}=F(r);function s(e){switch(e){case"Projects":return"dashboard";case"Teams":return"peopleTwoTone";case"Challenges":return"challengesTwoTone"}}return m("div",{className:"UserProfileLinks",children:[m(O,{variant:"headline2",className:"title",children:[a&&m(g,{children:[a==null?void 0:a.userName,"'s Items"]}),!a&&t(V,{width:"75%"})]}),t("div",{className:"Tabs",children:Object.keys(_).map(e=>t("div",{className:"Tab",role:"tab",onClick:i=>{i.stopPropagation(),c(_[e])},"aria-selected":_[e]===n,children:m(O,{variant:"buttonLink",children:[t(H,{icon:s(_[e])})," ",_[e]]})},e))}),t("div",{className:"TabContent",children:m($,{children:[n==="Projects"&&t(g,{children:t(j,{userId:r})}),n==="Teams"&&t(g,{children:t(I,{userId:r})}),n==="Challenges"&&t(g,{children:t(E,{userId:r})})]})})]})}try{U.displayName="UserProfileLinks",U.__docgenInfo={description:"",displayName:"UserProfileLinks",props:{userId:{defaultValue:null,description:"",name:"userId",required:!0,type:{name:"string"}}}}}catch{}const Ge={title:"Synapse/UserProfileLinks",component:U},T={args:{userId:"1131050"}};var b,L,k;T.parameters={...T.parameters,docs:{...(b=T.parameters)==null?void 0:b.docs,source:{originalSource:`{
  args: {
    userId: '1131050'
  }
}`,...(k=(L=T.parameters)==null?void 0:L.docs)==null?void 0:k.source}}};const qe=["Demo"];export{T as Demo,qe as __namedExportsOrder,Ge as default};
//# sourceMappingURL=UserProfileLinks.stories-4380cc49.js.map
