import{l as c}from"./index-d2b24c97.js";import{g as w}from"./entityHandlers-6d683341.js";import{a as E,g as U}from"./userProfileHandlers-e7eacef7.js";import{g as A,B as P}from"./getEndpoint-ac94413e.js";import{g as B,a as M,b as $}from"./accessRequirementHandlers-a20fd536.js";import{g as v}from"./MockSubmission-4b2d15e0.js";import{a as F,g as x}from"./fileHandlers-3b6b36a9.js";import{g as V}from"./researchProjectHandlers-967be7b7.js";import{K as C,T as K,L as m}from"./SynapseClient-f341520e.js";import{m as _,a as D,b as g,M as N}from"./mock_user_profile-ff8c0312.js";import{f as r,p as k,m as W}from"./mock_file_handle-91d41d04.js";import{t as L}from"./times-23469bb8.js";function q(e){return{id:String(r.number.int()),etag:r.string.uuid(),...e}}function G(e){return{id:String(r.number.int()),activeAuthors:_.map(t=>String(t.id)),createdBy:String(k().id),createdOn:r.date.anytime().toISOString(),etag:r.string.uuid(),isDeleted:!1,isEdited:!1,isPinned:!1,lastActivity:r.date.anytime().toISOString(),messageKey:`${r.number.int()}/${r.number.int()}/${r.string.uuid()}`,modifiedOn:r.date.anytime().toISOString(),numberOfReplies:r.number.int({max:500}),numberOfViews:r.number.int({max:5e3}),title:r.lorem.words({min:2,max:8}),...e}}const z="984321189",I=W.map(e=>q({projectId:e.id})),J=I.flatMap(e=>L(10).map(t=>G({forumId:e.id,projectId:e.projectId}))),l={id:"999",forumId:z,projectId:"123",title:"mockTitle1",createdOn:"2022-09-28",createdBy:D.ownerId,modifiedOn:"2022-09-28",etag:"xxx",messageKey:"xxx",numberOfViews:2,numberOfReplies:3,lastActivity:"2022-09-28",activeAuthors:[D.ownerId,g.ownerId],isEdited:!1,isDeleted:!1,isPinned:!1},Q={...l,id:"888",projectId:"12",title:"mockTitle2",createdBy:g.ownerId,numberOfViews:14,numberOfReplies:3};({...l,createdBy:g.ownerId,threadId:l.id});const h=[...J,l,Q];function X(e){return[c.rest.get(`${e}${C}/:id`,async(t,n,s)=>{let o=404,a={reason:`MSW could not find a mock forum object with ID ${t.params.id}`};const i=I.find(d=>d.id===t.params.id);return i&&(o=200,a=i),n(s.status(o),s.json(a))}),c.rest.get(`${e}${K}/:id`,async(t,n,s)=>{let o=404,a={reason:`MSW could not find a mock discussion thread bundle object with ID ${t.params.id}`};t.params.id==="messageUrl"&&(a={reason:"GET /thread/messageUrl is not yet implemented"});const i=h.find(d=>d.id===t.params.id);return i&&(o=200,a=i),n(s.status(o),s.json(a))})]}function j(e){return{subscriptionId:String(r.number.int({min:1e3,max:9999})),subscriberId:String(N),createdOn:r.date.anytime().toISOString(),...e}}const R=I.map(e=>j({objectId:e.id,objectType:m.FORUM})),S=h.map(e=>j({objectType:m.THREAD,objectId:e.id}));function Y(e){return[c.rest.get(`${e}/repo/v1/subscription/all`,async(t,n,s)=>{const o=t.url.searchParams.get("objectType"),a=t.url.searchParams.get("sortDirection"),i=t.url.searchParams.get("offset"),d=t.url.searchParams.get("limit");let u=[];o===m.FORUM?u=R:o===m.THREAD&&(u=S);const f=u.length;a&&(u=u.sort((O,H)=>{const y=new Date(H.createdOn)-new Date(O.createdOn);return a==="ASC"?y:-1*y}));let p=0,b;i&&(p=parseInt(i)),d&&(b=parseInt(d)),u=u.slice(p,p+b);let T={results:u,totalNumberOfResults:f};return n(s.status(200),s.json(T))}),c.rest.post(`${e}/repo/v1/subscription/list`,async(t,n,s)=>{const o=await t.json(),a=o.objectType;let i=[];a===m.FORUM?i=R:a===m.THREAD&&(i=S),i.filter(f=>o.idList.includes(f.subscriptionId));const d=i.length;let u={results:i,totalNumberOfResults:d};return n(s.status(200),s.json(u))})]}const Z=e=>[c.rest.options("*",async(t,n,s)=>n(s.status(200))),c.rest.get(`${e}/auth/v1/authenticatedOn`,async(t,n,s)=>n(s.status(200),s.json({authenticatedOn:new Date().toISOString()}))),...w(e),...E(e),U(e,!0,!0),...v(e),...B(e),...M(),...$(e),...F(e),...V(e),...x(e),...X(e),...Y(e)];Z(A(P.REPO_ENDPOINT));export{Z as g};
//# sourceMappingURL=handlers-a2750ad6.js.map
